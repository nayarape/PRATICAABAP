‚úÖ DESAFIO 3: Gera√ß√£o de SmartForm com dados do pedido
üéØ Objetivo:Criar um SmartForm que gere um documento do pedido, contendo:

Cabe√ßalho do pedido (cliente, data, n√∫mero)
Itens do pedido (material, quantidade)
Informa√ß√µes de carga (data de entrega, peso, etc.)

REPORT zsmartform_pedido.

TABLES: zgnn_ped_cabec,
        zgnn_ped_item,
        zgnn_ped_carga.

PARAMETERS: p_vbeln TYPE zgnn_ped_cabec-vbeln.

* Estruturas de trabalho
DATA: wa_cabec TYPE zgnn_ped_cabec,
      it_itens TYPE STANDARD TABLE OF zgnn_ped_item,
      it_carga TYPE STANDARD TABLE OF zgnn_ped_carga.

* Function module gerado pelo SmartForm
DATA: fm_name TYPE rs38l_fnam.

START-OF-SELECTION.

* Buscar dados do cabe√ßalho
SELECT SINGLE * INTO wa_cabec
  FROM zgnn_ped_cabec
  WHERE vbeln = @p_vbeln.

IF sy-subrc <> 0.
  MESSAGE 'Pedido n√£o encontrado.' TYPE 'E'.
ENDIF.

* Buscar itens do pedido
SELECT * INTO TABLE it_itens
  FROM zgnn_ped_item
  WHERE vbeln = @p_vbeln.

* Buscar dados de carga
SELECT * INTO TABLE it_carga
  FROM zgnn_ped_carga
  WHERE vbeln = @p_vbeln.

* Obter nome do SmartForm gerado
CALL FUNCTION 'SSF_FUNCTION_MODULE_NAME'
  EXPORTING
    formname           = 'ZSF_PEDIDO_CLIENTE'
  IMPORTING
    fm_name            = fm_name
  EXCEPTIONS
    no_form            = 1
    no_function_module = 2
    OTHERS             = 3.

IF sy-subrc <> 0.
  MESSAGE 'Erro ao buscar fun√ß√£o do SmartForm.' TYPE 'E'.
ENDIF.

* Chamar o SmartForm
CALL FUNCTION fm_name
  EXPORTING
    cabecalho = wa_cabec
  TABLES
    itens     = it_itens
    cargas    = it_carga.


## üé® **Layout do SmartForm: ZSF\_PEDIDO\_CLIENTE**

### üìå Passo 1: Criar o SmartForm

* Acesse a transa√ß√£o: `SMARTFORMS`
* Nome: `ZSF_PEDIDO_CLIENTE`
* Clique em **Create**

---

## üß± ESTRUTURA GERAL DO FORMUL√ÅRIO

```plaintext
+--------------------------------------------------------+
| LOGO DA EMPRESA (opcional)                            |
| T√çTULO: Pedido de Venda                                |
+--------------------------------------------------------+

Informa√ß√µes do Cabe√ßalho
-------------------------
Pedido N¬∫:          &CABECALHO-VBELN&
Cliente:            &CABECALHO-KUNNR&
Data Cria√ß√£o:       &CABECALHO-ERDAT&
Status:             &CABECALHO-STATUS&

Itens do Pedido
---------------
| Material | Descri√ß√£o | Quantidade |
|----------|-----------|------------|
| &ITENS-MATNR& | &ITENS-ARKTX& | &ITENS-MENGE& |

Informa√ß√µes de Carga
---------------------
Data de Entrega:     &CARGAS-LFDAT&
Peso Total:          &CARGAS-BRGEW& (se existir)

+--------------------------------------------------------+
```

---

## üî® Passo 2: Configurar as Janelas no SmartForm

### üìÇ Navegue pelo "Tree" da esquerda (Node Tree)

1. **Global Definitions > Import**

   * Crie:

     * `CABECALHO` TYPE `ZGNN_PED_CABEC`
     * `ITENS` TYPE `ZGNN_PED_ITEM` (com `Type Table`)
     * `CARGAS` TYPE `ZGNN_PED_CARGA` (com `Type Table`)

---

## üß© Passo 3: Criar Layout no Node Tree

### 1. **Main Window** (obrigat√≥ria)

Clique com bot√£o direito em *Main Window* ‚Üí **Create ‚Üí Text**

* **Texto:** `'Pedido de Venda'`
* Alinhar ao centro (Output Options ‚Üí Center)

---

### 2. **Criar um Text para o Cabe√ßalho**

Bot√£o direito em Main Window ‚Üí **Create ‚Üí Text**

* **Texto:**

```plaintext
Pedido N¬∫: &CABECALHO-VBELN&
Cliente: &CABECALHO-KUNNR&
Data: &CABECALHO-ERDAT&
Status: &CABECALHO-STATUS&
```

---

### 3. **Criar Tabela de Itens**

Bot√£o direito em Main Window ‚Üí **Create ‚Üí Table**

* **Data**:

  * Internal Table: `ITENS`
  * Work Area: `WA_ITENS`

#### Subn√≥s do Table:

* **Table Line** (linha de dados)

  * Crie 3 c√©lulas:

    * `&WA_ITENS-MATNR&`
    * `&WA_ITENS-ARKTX&`
    * `&WA_ITENS-MENGE&`

* **Header Line** (cabe√ßalho da tabela)

  * Crie as labels:

    * "Material" | "Descri√ß√£o" | "Quantidade"

---

### 4. **Criar Tabela de Cargas**

Bot√£o direito em Main Window ‚Üí **Create ‚Üí Table**

* **Internal Table:** `CARGAS`
* **Work Area:** `WA_CARGAS`

#### Subn√≥s:

* Header Line:

  * "Data Entrega" | "Peso" | "Volume" (se tiver)

* Table Line:

  * `&WA_CARGAS-LFDAT&`
  * `&WA_CARGAS-BRGEW&` *(peso bruto, se tiver)*
  * `&WA_CARGAS-NTGEW&` *(peso l√≠quido, opcional)*

---

## ‚úÖ Finalizar

* Salve
* Ative o SmartForm
* Execute o programa `ZSMARTFORM_PEDIDO` para testar
* Ele chamar√° o formul√°rio com os dados do pedido

---

## üìå Dica de Apresenta√ß√£o

Se for numa entrevista ou entrega t√©cnica:

* Mostre o layout impresso em PDF (ou via print)
* Justifique o design: "agrupamento l√≥gico dos dados para facilitar a leitura"
* Pode at√© adicionar uma observa√ß√£o tipo:

  * "Fiz um espa√ßo reservado para logotipo"
  * "Cabe√ßalho e agrupamento seguem padr√£o SAP para formul√°rios de pedidos"

